<!-- Single page application -->

<main class="main">
  <div class="header-text">
    <h1> Med Llava </h1>
    <h3> By Scott Spicer </h3>
    <p>
      This site hosts an interactive demo of an AI assistant that answers
      multiple-choice medical questions by analyzing the accompanying image.
    </p>
    <p>
      Under the hood is a LLaVA model powered by Vicuna-13B.
      I fine-tuned it on 20,000 image-question pairs, boosting test set accuracy by 15%.
    </p>
    <app-heartbeat></app-heartbeat>
  </div>

  <div class="inputs">
    @if (!imageUploaded) {
      <div class="dropzone">
        <input type="file"
               id="fileDrop"
               (change)="onFileChange($event)">
        <h3>Drag & Drop Image File</h3>
        <mat-icon>attachment</mat-icon>
        <h3>or</h3>
        <label for="fileDrop" class="browseLabel">Browse for Image File</label>
      </div>
    }
    @else {
      <!-- instant preview -->
      <div class="uploadedImg">
        <img [src]="imageSrc">
        <button type="button" class="reset-button" style="width: 80%;" (click)="resetImage()">Clear Image</button>
      </div>
    }


    <div class="question-grid">
      <label for="question-input" style="font-weight:bold; text-decoration: underline;">Question</label>
      <textarea class="question-input" id="question-input" [(ngModel)]="input.question"></textarea>
    </div>


    <div class="choices-grid">
      <label for="a" style="font-weight:bold;">A: </label>
      <input type="text" id="a" [(ngModel)]="input.a">

      <label for="b" style="font-weight:bold;">B: </label>
      <input type="text" id="b" [(ngModel)]="input.b">

      <label for="c" style="font-weight:bold;">C: </label>
      <input type="text" id="c" [(ngModel)]="input.c">

      <label for="d" style="font-weight:bold;">D: </label>
      <input type="text" id="d" [(ngModel)]="input.d">
    </div>

    <div class="ctrl-button-container">
      <button (click)="reset()" class="reset-button">Reset</button>
      <button (click)="submit()" class="submit-button">Submit</button>
    </div>
    
    @if(showAnswer) {
      <p>Answer: {{ answer }}</p>
    }

  
  </div>
  

</main>


<router-outlet />
